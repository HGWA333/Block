<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <h1>안녕 난 최초 블록!</h1>
    <h1>초기의 제네시스 블록은 하드 코딩으로 직접 만들어준다.</h1>
    <div class="flex-box">
      <div id="block">
        <label for="">블록 버전 (블록 버전 초기값)</label>
        <h3 id="version"></h3>
        <label for="">블록 높이 (제네시스 블록 최초의 블록 높이가 0번)</label>
        <h3 id="height"></h3>
        <label for="">블록의 생성 시간(블록의 생성 시간)</label>
        <h3 id="timestamp"></h3>
        <label for="">이전 블록의 해시값</label>
        <h3 id="previousHash"></h3>
        <label for=""> 블록 해시(최초 블록이라서 해시값을 0으로 대체)</label>
        <h3 id="hash"></h3>
        <label for="">
          머클 루트(최초 블록이라서 머클 루트 값을 0으로 대체)</label
        >
        <h3 id="merkleRoot"></h3>
        <label for=""> 논스(증가시키다가 퀴즈가 풀었을 때 도달한 값)</label>
        <h3 id="nonce"></h3>

        <!-- 000000000 <= 0의 갯수 -->
        <!-- nonce 값을 올리면서 계속 해싱한 값의 0의 갯수가 난이도 보다 많아야 블록을 생성을 할 수 있다.  -->
        <!-- 난이도의 갯수에 따라서 0의 갯수를 구함 -->
        <!-- 난이도가 10이면 0이 10개 이상 될 때까지 돌린다고 보면 된다.-->
        <label for="">
          난이도(블록의 생성 주기를 조절하기 위한 값으로 난이도는 뒤에 볼 수
          있다. )</label
        >
        <h3 id="difficulty"></h3>
        <label for=""> 블록 내용(최초)</label>
        <h3 id="data"></h3>
      </div>
    </div>
  </body>
  <script>
    const blockData = {
      version: "1.0.0", // 첫 번째 버전
      height: 0, // 첫 번째 블록 첫 번째 (배열)인덱스
      timestamp: Date.now(), // 블록이 생성될 때 시간
      previousHash: "0".repeat(64), // 이전 블록 해쉬. 첫 번째 생성 된 블록에는 이전 블록이 없다. 그래서 repaet(64)로 미리 채워 줌
      hash: "0".repeat(64), // 블록의 해쉬도 0으로 다 채울 필요가 없다.
      merkleRoot: "0".repeat(64), // 머클루트도 0으로 다 채움
      nonce: 0,
      difficulty: 0,
      data: ["The Times 03/Jan/2009"],
    };

    const Header = {};
    const Body = {};

    for (const key in blockData) {
      console.log(block.children[key]);
      // 태그 관련
      console.log(blockData[key]);
      // 객체 관련
      block.children[key].innerHTML = blockData[key];
    }

    const Block = {};
    // hash = 블록을 특정하는 값이고 고유 식별자이다. 해시값은 [블록의 생성일, 버전, 머클루트, 이전 블록의 해시, 논스]가 기본 값으로 들어간다.
    // merkleRoot = 트랜잭션 내용이 머클트리로 구성되고 루트 값

    // 블록 체인 거래 변경이 불가능한 이유
    // 블록의 머클루트 계산에 이전 블록 (previousHash) 해시가 포함되어 있기 때문
    // 하나의 블록의 내용이 변경되면 변경한 블록부터 다음 블록 해시 변경으로 이어진다.
    // 예) 거래정보 변경  -> 머클루트 변경 -> 머클루트가 변해서 블록 해시가 변경 됨
    // 블록의 거래정보를 변경하기 위해서는 거래 정보를 변경한 블록부터 다시 채굴해야 한다.
    // 그렇지 않으면 뒤의 블록이 다 변경되기 때문이다.
  </script>
</html>
